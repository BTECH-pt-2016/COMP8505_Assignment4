(function(q,r,w){q.execute(function(){q.register("AmazonHelpPopup",function(){return function(c,l,m){r.open(c,l,m).focus();return!1}});q.when("A","ready").execute(function(c){c.$(".auth-autofocus").first().focus()});q.when("A","ready").execute(function(c){function l(){location.href=k.returnToAddress}function m(){clearTimeout(h);h=setTimeout(l,g)}var k=c.state("timeout-parameters");if(k){var h=0,g=k.timeoutValue;document.onmousemove=m;document.onkeypress=m;document.ontouchstart=
m;document.ontouchmove=m;document.ontouchend=m;m()}});q.when("A","auth-captcha-cf").register("auth-image-captcha",function(c){function l(e){e&&e.captchaImageUrl&&h.test(e.captchaImageUrl)?(k("#auth-captcha-image").attr("src",e.captchaImageUrl),k("input[type='hidden'][name='ces']").val(e.cesString)):(q.log("Failed to load new CAPTCHA due to invalid response from server","FATAL","auth-captcha"),r.location.reload(!0))}function m(){k("#auth-captcha-refresh-link").hide();k("#auth-captcha-noop-link").show();
k("#auth-captcha-image").hide();k("#auth-captcha-image-container").addClass("a-lazy-loaded");var e=k("#auth-captcha-image").attr("data-refresh-url");e||q.log("Attempting to instantiate Captcha without a valid refresh url.","FATAL","auth-captcha");c.ajax(e,g)}var k=c.$,h=/^(http|https):\/\//,g={cache:!1,timeout:700,error:function(){q.log("Failed to refresh CAPTCHA due to error response from server","FATAL","auth-captcha");r.location.reload(!0)},success:l};k("#auth-captcha-image").load(function(){k("#auth-captcha-noop-link").hide();
k("#auth-captcha-refresh-link").show();k("#auth-captcha-image-container").removeClass("a-lazy-loaded");k("#auth-captcha-image").fadeIn()});k(document).delegate("#auth-captcha-refresh-link","click",function(e){e.preventDefault();m()});return{handleSuccess:l,refresh:m}});q.when("A","auth-image-captcha","ready").register("auth-audio-captcha-handler",function(c,l){function m(){x.val()!==w&&"true"===x.val()&&0!==y.length&&(e.play(),e.pause())}function k(a){a&&a.captchaImageUrl&&A.test(a.captchaImageUrl)?
(d.val(a.cesString),t.attr("src",a.captchaImageUrl),p.attr("href",a.captchaImageUrl),e.load(),m()):(q.log("Failed to load new CAPTCHA due to invalid response from server","FATAL","auth-audio-captcha-handler"),r.location.reload(!0))}function h(){c.ajax(t.attr("data-refresh-url"),F);z||a.focus()}var g=c.$,e=g("#audio-captcha")[0],d=g("input[type='hidden'][name='ces']"),b=g("#audio-captcha-section"),a=g("#auth-captcha-guess"),f=g("#image-captcha-section"),p=g("#auth-download-captcha-mp3"),t=g("#mp3-file"),
v=g("#auth-switch-captcha-to-audio-container"),x=g("#use_audio_captcha"),u=g("#use_image_captcha"),y=g("#auth-error-message-box"),A=/^(http|https):\/\//,z=g(".a-mobile").length,D=g("#audio-captcha-options"),E=g("#image-captcha-options"),C=g("#image-captcha-placeholder"),G=g("#audio-captcha-placeholder"),F={cache:!1,timeout:700,error:function(){q.log("Failed to refresh CAPTCHA due to error response from server","FATAL","auth-audio-captcha-handler");r.location.reload(!0)},success:k};c.capabilities.audio&&
v.show();m();return{switchCaptchaToAudio:function(){f.hide();u.val("false");b.show();x.val("true");a.val("");h();z&&(E.hide(),D.show(),a.attr("placeholder",G.val()))},switchCaptchaToImage:function(){b.hide();x.val("false");f.show();u.val("true");a.val("");e.pause();l.refresh();z?(E.show(),D.hide(),a.attr("placeholder",C.val())):a.focus()},audioRefresh:h,handleSuccess:k}});q.when("A","auth-audio-captcha-handler","ready").register("auth-audio-captcha",function(c,l){var m=c.$;m("#auth-switch-captcha-to-audio").click(function(c){c.preventDefault();
l.switchCaptchaToAudio()});m("#auth-switch-captcha-to-image").click(function(c){c.preventDefault();l.switchCaptchaToImage()});m("#auth-refresh-audio").click(function(c){c.preventDefault();l.audioRefresh()});return{handleSuccess:l.handleSuccess}});q.when("A").register("auth-cookie",function(c){function l(h,g,e){if(h){var d="";c.isFiniteNumber(e)&&(0>e?d="; expires=Thu, 01 Jan 1970 00:00:00 GMT":(d=new Date,d.setDate(d.getDate()+e),d="; expires="+d.toGMTString()));document.cookie=h+"="+
r.encodeURIComponent(g)+d;return!0}return!1}function m(h){if(0<document.cookie.length&&h){var g=document.cookie.indexOf(h+"=");if(-1<g)return g=g+h.length+1,h=document.cookie.indexOf(";",g),-1===h&&(h=document.cookie.length),r.decodeURIComponent(document.cookie.substring(g,h))}return""}function k(h){l(h,"",-1)}return{setCookie:l,getCookieValue:m,deleteCookie:k,checkCookieEnabled:function(h){l("amznTest","1");var g=m("amznTest");g?k("amznTest"):h&&(document.getElementById(h).style.display="block");
return!!g}}});q.when("A","ready").register("auth-pv-resend-utility",function(c){return{successHandler:function(c,m){c.show();m.show()},errorHandler:function(c,m,k,h,g){403===c.http.status?r.location=m.sessionTimeoutUrl:(0<=(c.http.response||"").search("Throttled")?k.show():h.show(),g.show())},hideMessageBox:function(c,m,k,h,g){c.hide();m.hide();k.hide();h.hide();g.hide()}}});q.when("A","auth-pv-resend-utility","ready").register("auth-pv-resend",function(c,l){var m=c.state("auth-pv-page-state");
if(m){var k=c.$,h=k("#auth-pv-client-side-success-box"),g=k(".auth-pv-client-side-success-messages li"),e=k("#auth-pv-client-side-error-box"),d=k(".auth-pv-client-side-error-messages li"),b=k(".auth-server-side-message-box"),a=k("#auth-resend-code-succeeded"),f=k("#auth-there-was-an-error-throttled"),p=k("#auth-there-was-an-error"),t=function(){l.successHandler(a,h)},v=function(a){l.errorHandler(a,m,f,p,e)};k("#auth-resend-code-link").click(function(a){l.hideMessageBox(h,g,e,d,b);c.ajax(m.resendUrl,
{method:"post",success:t,error:v})});return{successHandler:t,errorHandler:v}}});q.when("A").register("auto-verification-timeout",function(c){var l=c.$,m=l("#auth-auto-verification-failed");m.length&&c.delay(function(){m[0].click()},3E4)});q.when("A","AmazonHelpPopup","ready").execute(function(c,l){c.$("#auth-amazon-help-link").click(function(){return l(this.href,"AmazonHelp","width=700,height=800,resizable=1,scrollbars=1,toolbar=1,status=1")})});q.when("A").execute(function(c){c.declarative("auth-popup",
"click",function(c){var m=c.data;c=c.$target.closest("a")[0];(m=r.open(c.href,c.target,m.windowOptions))&&m.focus()})});q.when("auth-cookie","ready").execute(function(c){c.checkCookieEnabled("auth-cookie-warning-message")});q.when("A","ready").register("AuthToolkit",function(c){function l(g){"undefined"!==typeof h(g)&&h(g).hasClass("a-button-disabled")&&(h(g).removeClass("a-button-disabled"),k(g).attr("disabled",!1))}function m(g,e){var d=k(g),b=d.data("remaining"),a=d.data("unit");0===b?(l(g),h(g).find(".a-button-text").text(e),
c.trigger("AuthToolkit.countDownEnd",g)):0<b&&(d.data("remaining",b-1),h(g).find(".a-button-text").text(a.replace(/%d/,b)),c.delay(function(){m(g,e)},1E3))}function k(g){var e=h(g).find("button");return 0<e.length?e:h(g).find("input")}var h=c.$;return{disableButton:function(g){"undefined"===typeof h(g)||h(g).hasClass("a-button-disabled")||(h(g).addClass("a-button-disabled"),k(g).attr("disabled","disabled"))},enableButton:l,countingDown:function(g){if("undefined"!==typeof h(g)){var e=h(g).find(".a-button-text").text();
0<=k(g).data("remaining")&&m(g,e)}}}});q.when("A","ready").execute(function(c){var l=c.$("#auth-external-javascript").data("external-javascripts");l&&l.length&&c.each(l,function(c){q.load.js(c)})});q.when("A","a-modal","auth-validate-form-handler","ready").register("auth-phone-verification-modal",function(c,l,m){function k(){var b=d.val();p.text(b);var g=e.find("option:selected"),b=g.data("calling-code"),g=g.data("country-code");a.text(b);f.text(g)}var h=c.$,g=c.state("auth-phone-verification-modal");
if(g){var e=h("#auth-country-picker"),d=h("#ap_phone_number"),b=h("#"+g.formIdToBindTo),a=h("#auth-verify-mobile-calling-code"),f=h("#auth-verify-mobile-country-code"),p=h("#auth-verify-mobile-national-number");c.on("a:popover:beforeShow:verifyContinueModal",k);h(".auth-requires-verify-modal").click(function(a){a.preventDefault();m.validate(b)&&(a=h("#auth-verify-modal-action"),(a=l.get(a))&&d.is(":enabled")?a.show():b.submit())});c.declarative("auth-verify-modal-complete","click",function(){b.submit()});
return{updateVerificationModalContents:k}}});q.when("A","a-form-controls-api","ready").register("auth-signup",function(c,l){var m=c.$;m("#ap_use_mobile, #ap_use_email").click(function(c){m(".ap_email_fields,.ap_mobile_number_fields").toggle();m("#auth-country-picker, #ap_email, #ap_phone_number").prop("disabled",function(h,g){return!g});m("#auth-country-picker-container").toggleClass("a-button-disabled");m("#ap_email, #ap_phone_number").toggleClass("a-form-disabled");return!1})});
q.when("A","ap-form-validation-weblab","client-side-counters-util","page-util","ready").register("auth-validate-form-common",function(c,l,m,k){var h=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,g=/^ *\+|[a-zA-Z]/,e=/[a-zA-Z]/;return{isMatchingFields:function(d){var b=d.eq(0);d=d.eq(1);b=b.val().trim();d=d.val().trim();return b===d},isValidEmailField:function(d){d=d.val();return h.test(d.trim())},isValidPhoneNumberField:function(d){d=d.val();return!g.test(d.trim())},isValidClaimField:function(d){d=
d.val();return h.test(d.trim())||!e.test(d.trim())},isValidPasswordField:function(d){return 6<=d.val().trim().length},isNonEmptyField:function(d){return!!d.val().trim()}}});q.when("A","ap-form-validation-weblab","auth-validate-form-common","client-side-counters-util","page-util","ready").register("auth-validate-form-handler",function(c,l,m,k,h){function g(a){if(a)return a+=":visible","input:enabled."+a+", ."+a+" input:enabled"}function e(a,b,f,p){var d=b.data("validation-id")||b.parent().data("validation-id")||
b[0].name;d&&(z||(z={}),z[d]||(z[d]=[]),z[d].push({$field:b,type:f,extension:p}),p&&k.incrementCounter(h.getFormName(a)+h.toCamelCase(d+p)+x()))}function d(a){a.find(".auth-require-fields-match-group").each(function(){var b=u(this).find(g("auth-require-fields-match"));1<b.length&&m.isNonEmptyField(b.eq(0))&&m.isNonEmptyField(b.eq(1))&&!m.isMatchingFields(b)&&(e(a,b.eq(0),"Check Mismatch","-mismatch-alert"),e(a,b.eq(1),"Check Mismatch"))})}function b(a){a.find(g("auth-require-email-validaton")).each(function(){var b=
u(this);m.isNonEmptyField(b)&&!m.isValidEmailField(b)&&e(a,b,"Invalid Email","-invalid-email-alert")})}function a(a){a.find(g("auth-require-claim-validation")).each(function(){var b=u(this);m.isNonEmptyField(b)&&!m.isValidClaimField(b)&&e(a,b,"Invalid Claim","-invalid-claim-alert")})}function f(a){a.find(g("auth-require-phone-validation")).each(function(){var b=u(this);m.isNonEmptyField(b)&&!m.isValidPhoneNumberField(b)&&e(a,b,"Invalid Phone","-invalid-phone-alert")})}function p(a){a.find(g("auth-require-password-validation")).each(function(){var b=
u(this);m.isNonEmptyField(b)&&!m.isValidPasswordField(b)&&e(a,b,"Invalid Password","-invalid-password-alert")})}function t(a){a.find(g("auth-required-field")).each(function(){var b=u(this),f=this.name;m.isNonEmptyField(b)||y.test(f)&&z&&z[f.split("Check")[0]]||e(a,b,"Missing Required","-missing-alert")})}function v(a){var b=u("#auth-alert-window");a.find(".a-form-error").removeClass("a-form-error");u(".auth-error-messages li, .auth-inlined-error-message, .auth-server-side-message-box").hide();z?(c.each(z,
function(a,b){c.each(a,function(a){var f=a.$field;a=a.extension;var p=f.closest(".a-input-text-wrapper");0<p.length?p.addClass("a-form-error"):f.addClass("a-form-error");a&&(f="#auth-"+b+a,a=u(f+A),a.length?a.show():u(f).show())})}),u("#message-box-slot").hide(),b.show(),a.find(".a-form-error").first().focus()):b.hide()}function x(){return u("html").hasClass("a-mobile")?"OnMobile":"OnDesktop"}var u=c.$,y=/Check$/g,A="",z;return{validate:function(e){e=e&&e.jquery?e:u(e);if(e.length&&e.is("form")){A=
e.hasClass("ap_ango_phone")?"-ango-phone":e.hasClass("ap_ango_email")?"-ango-email":"";t(e);l.shouldValidateClaim&&a(e);b(e);f(e);l.shouldValidatePassword&&p(e);d(e);z&&k.incrementCounter(h.getFormName(e)+"PreventedServerRoundTrips"+x());v(e);var g=!z;e.data("auth-validation-errors",z);z=void 0;return g}},getErrors:function(a){return(a.jquery?a:u(a)).data("auth-validation-errors")},getSelectorForInputsOfErrorTypeClass:g,determineDeviceType:x}});q.when("A","auth-validate-form-handler",
"ready").register("auth-validate-form-moa",function(c,l){var m=c.$;m(document.body).delegate(".auth-validate-form-moa","submit",function(c){l.validate(this)||c.preventDefault()})});q.when("A","auth-validate-form-handler","ap-form-validation-weblab","client-side-counters-util","page-util","ready").register("auth-validate-form",function(c,l,m,k,h){m.shouldValidateForm&&(c=c.$,c(document.body).delegate(".auth-validate-form","submit",function(g){k.incrementCounter(h.getFormName(this)+"Submit"+l.determineDeviceType());
l.validate(this)||g.preventDefault()}))});q.when("A","AuthToolkit","ready").register("auth-3p-phone-verification",function(c,l){var m=c.$,k=m("#auth-pv-enter-code");l.countingDown("#ap-3p-get-pin-code-button");c.on("AuthToolkit.countDownEnd",function(h){"#ap-3p-get-pin-code-button"===h&&(m("#auth-phone-number").removeClass("a-form-disabled"),m("#auth-phone-number-wrapper").removeClass("a-form-disabled"),m("#auth-phone-number").attr("disabled",!1))});k.bind("change paste keyup",function(){0<
m(this).val().length?l.enableButton("#ap-3p-pv-create-account"):l.disableButton("#ap-3p-pv-create-account")});m("#auth-verify-button").click(function(){var h=m("#auth-3p-pv-form");h.find("#insisted").val("false");h.find("#getPinCodeAction").val("true");h.submit()})});q.when("A","a-modal","ready").register("ap-3p-pv-modal",function(c,l){var m=c.$,k=c.state("ap-3p-pv-modal");if(k){var h=k.thirdPartyPhoneConflict;if(h&&"None"!==h.toString()){var g=m("#"+k.formIdToBindTo),m=m("#ap-3p-pv-modal-action");
(m=l.get(m))&&h&&"None"!==h.toString()&&m.show();c.declarative("ap-3p-pv-modal-complete","click",function(){h&&"WeChat"===h.toString()&&(g.find("#insisted").val("true"),g.submit())})}}});q.when("A","a-modal","ready").register("ap-3p-account-connected-modal",function(c,l){var m=c.$,k=c.state("ap-3p-account-connected-modal");k&&k.thirdPartyAccountStatus&&"rejectWithLoginIdIfConnected"===k.thirdPartyAccountStatus&&(m=m("#ap-3p-account-connected-modal-action"),(m=l.get(m))&&m.show())});
q.when("A").execute(function(c){function l(k){var h=c.state("moa_registration_v2_info");h&&h.enabled&&c.get("/ap/nocontent/ref="+k+"_"+h.device,{})}var m=c.$;m("#ap_use_email").click(function(){l("ap_mmoar_usee");m("#ap_email").val(m("#ap_phone_number").val())});m("#ap_use_mobile").click(function(){l("ap_mmoar_usem");m("#ap_phone_number").val(m("#ap_email").val())});m("#auth-country-picker-container").click(function(){l("ap_mmoar_ccp")});m("#continue").click(function(){l("ap_mmoar_cont")});c.on("a:popover:show:verifyContinueModal",
function(){l("ap_mmoar_vm_o")});c.on("a:popover:hide:verifyContinueModal",function(){l("ap_mmoar_vm_c")});m("#auth-verification-ok-announce").click(function(){l("ap_mmoar_vm_ok")});m("#auth-already-have-account").click(function(){l("ap_mmoar_signin")});m("#auth-verify-button").click(function(){l("ap_mmoar_pv_verify")});m("#auth-resend-code-link").click(function(){l("ap_mmoar_pv_resend")})});q.when("A","jQuery","ready").register("wechat-wxlogin-js",function(c,l){if(0<l("#auth-wechat-login-container").length){var m=
l("#auth-wechat-login-container").data("wechatUrl");q.load.js(m)}});q.when("A","jQuery","client-side-counters-util","wechat-login-button-counter","wechat-wxlogin-js","ready").register("wechat-qrcode-module",function(c,l,m,k){if(0<l("#auth-wechat-login-container").length){var h=function(){var e=l("div#auth-interactive-dialog-content"),d=l("div#auth-wechat-qrcode-loading-container").clone();d.removeClass("hidden");d.appendTo(e);l("div#auth-interactive-dialog").css("display","table");var b=l("#auth-wechat-login-container"),
e=b.data("appid"),d=b.data("scope"),a=b.data("redirectUrl"),f=b.data("state"),b=b.data("style");new r.WxLogin({id:"auth-wechat-qrcode-container",appid:e,scope:d,redirect_uri:a,state:f,style:b})},g=function(){var e=l("div#auth-interactive-dialog-content");l("div#auth-interactive-dialog").css("display","none");e.empty()};l("div#auth-interactive-dialog-content").click(function(e){e.stopImmediatePropagation()});l("#auth-wechat-login-container").click(function(){m.incrementCounter(k.weChatButtonClickEventCounterName);
h()});l("div#auth-interactive-dialog-container").click(function(){g()});return{showWeChatQRCode:h,hideWeChatQRCode:g}}});q.when("A","client-side-counters-util","counters-name","ready").register("wechat-login-button-counter",function(c,l,m){var k=m.getCommonCounterNamePrefix()+":WeChat";m=c.$("#auth-wechat-login-container-noninteractive");0<m.length&&m.click(function(){l.incrementCounter(k)});c=c.$("a#signInSubmit.wechat_button");0<c.length&&c.click(function(){l.incrementCounter(k)});return{weChatButtonClickEventCounterName:k}});
q.when("A").register("wechat",function(c){function l(g,e){return m.ajax({url:"https://res.wx.qq.com/connect/zh_CN/htmledition/js/wxLogin.js",dataType:"script",success:g,error:e,cache:!0})}var m=c.$,k=!1,h=null;return{WxLogin:function(g,e){e&&m.isFunction(e)||(e=function(){});k?e(new h(g)):l(function(){k=!0;h=r.WxLogin;e(new h(g))},function(){e()})}}});q.when("A","wechat","ready").execute(function(c,l){var m=c.$,m=m("#auth-identity-provider-wechat-qrcode-container");0!==m.length&&l.WxLogin({id:"auth-identity-provider-wechat-qrcode-container",
appid:m.data("appid"),scope:m.data("scope"),redirect_uri:m.data("redirect-uri"),state:m.data("state"),style:m.data("style")})});q.when("A","auth-form-field-utils","cvf","client-side-counters-util","ready").register("auth-contact-verification-handler",function(c,l,m,k){function h(d){var b=this;d=d||{};this.postVerificationSuccessCallback=d.postVerificationSuccessCallback||e.noop;this.$verificationForm=e("form.auth-contact-verification-form");this.$contactVerificationWidgetTarget=e(".auth-contact-verification-widget-target").first();
this.$claimToken=this.$verificationForm.find('input[type="hidden"].auth-contact-verification-claim-token');this.$verifyContactButton=this.$verificationForm.find(".auth-contact-verification-button");this.contactVerificationEndpoint=this.$verificationForm.attr("action");this.postVerificationFormAction=this.$verificationForm.data("post-verification-action");this.$verificationTarget=this.$verificationForm.find(".auth-contact-verification-target");this.$spinnerTarget=this.$verificationForm.find(".auth-contact-verification-spinner");
this.$successMessage=this.$verificationForm.find(".auth-contact-verification-success-message");this.preVerify="preVerify";this.pendingVerify="pendingVerify";this.verifyState=b.preVerify;this.formSubmitEvent="submit.contactVerification";this.$reverifyOnChangeTarget=e(".auth-require-reverify-on-change, .auth-require-reverify-on-change :input");this.verificationFlowCompleteTime=this.verifyRequestCompleteTime=this.verificationFlowStartTime=0;this.disableTargetLabelCssClass="a-color-tertiary";this.errorCodes=
"&errorCodes=";this.internalError="INTERNAL_ERROR";this.ajax=function(a,b){c.ajax(a,b)};this.startContactVerification=function(){b.verificationFlowStartTime=(new Date).getTime();b.ajax(b.contactVerificationEndpoint,{method:"post",cache:!1,params:g(b.$verificationForm),error:b.startContactVerificationError,success:b.initializeComposableVerificationWidget})};this.startContactVerificationError=function(a,f,p){q.log("Error contacting contact verification endpoint: "+p+". Customers will not be able to verify their contact information.",
"INFO");k.incrementCounter("contactVerificationAjaxFailureContactVerificationInit");r.location.href=r.location.href+b.errorCodes+b.internalError};this.cvfWidgetFactory=m;this.initializeComposableVerificationWidget=function(a){a=a||{};a.location?r.location.href=a.location:(a=a.requestToken||"",b.verifyRequestCompleteTime=(new Date).getTime(),a={target:b.$contactVerificationWidgetTarget,requestToken:a,onSuccess:b.completeContactVerification,onError:b.widgetInitializationError,autoStart:!1},b.$spinnerTarget&&
(a.spinnerTarget=b.$spinnerTarget),b.cvfWidgetFactory.create(a).start())};this.widgetInitializationError=function(a,f,p){q.log("Error initializing verification widget: "+p+". Customers will not be able to verify their contact information.","INFO");k.incrementCounter("contactVerificationAjaxFailureWidgetInit");r.location.href=r.location.href+b.errorCodes+b.internalError};this.setClaimToken=function(a){b.$claimToken.val(a)};this.completeContactVerification=function(a,f){b.verificationFlowCompleteTime=
(new Date).getTime();f?(b.setClaimToken(a),b.setPostVerificationAction(),b.$successMessage.show(),b.$verificationForm.unbind(b.formSubmitEvent),b.$verificationTarget.each(function(){l.enableInput(e(this));var a=e("label[for='"+e(this).attr("id")+"']");a.length&&a.removeClass(b.disableTargetLabelCssClass)}),k.insertCounter("contactVerificationCompleteVerificationFlowCompleteTime",b.verificationFlowCompleteTime-b.verificationFlowStartTime),k.insertCounter("contactVerificationVerifyRequestCompleteTime",
b.verifyRequestCompleteTime-b.verificationFlowStartTime),e.isFunction(b.postVerificationSuccessCallback)&&b.postVerificationSuccessCallback()):r.location.href=r.location.href+b.errorCodes+b.internalError};this.setPostVerificationAction=function(){b.$verificationForm.prop("action",b.postVerificationFormAction)};this.verificationRequestHandler=function(a){a.preventDefault();b.$spinnerTarget&&b.$spinnerTarget.show();b.verifyState=b.pendingVerify;b.$verifyContactButton.hide();b.startContactVerification()};
this.bindVerificationFormEvent=function(){b.$verificationForm.bind(b.formSubmitEvent,b.verificationRequestHandler)};b.bindVerificationFormEvent();this.unbindVerificationFormEvent=function(){b.$verificationForm.unbind(b.formSubmitEvent)};this.safeBind=function(){b.unbindVerificationFormEvent();b.bindVerificationFormEvent()};this.resetContactVerificationOnRequestInfoChange=function(){b.$reverifyOnChangeTarget.bind("keyup",function(a){a.preventDefault();a=13===a.keyCode;b.verifyState===b.preVerify||
a||(c.trigger("cvf:claim:changed"),b.verifyState=b.preVerify,b.reVerifyEmail());b.$claimToken.val()&&b.safeBind()})};b.resetContactVerificationOnRequestInfoChange();this.reVerifyEmail=function(){b.$contactVerificationWidgetTarget.empty();b.$verifyContactButton.show();b.$successMessage.hide();b.disableVerificationTarget();b.$verificationForm.prop("action",b.contactVerificationEndpoint)};this.disableVerificationTarget=function(){b.$verificationTarget.each(function(){l.disableInput(e(this));var a=e("label[for='"+
e(this).attr("id")+"']");a.length&&a.addClass(b.disableTargetLabelCssClass)})}}function g(d){d=d.find("input.auth-contact-verification-request-info, input[type=hidden]");return l.inputsToJson(d)}var e=c.$;return{create:function(d){k.incrementCounter("contactVerificationCVFCreate");return new h(d)},ContactVerificationHandler:h}});q.when("auth-contact-verification-handler","ready").register("auth-contact-verification-autostart",function(c){return c.create()});q.when("A").register("auth-form-field-utils",
function(c){function l(e){e.prop("disabled",!1);e.removeClass("a-form-disabled");e.find("input").prop("disabled",!1)}function m(e){e.removeClass("a-button-disabled");e.find("input").prop("disabled",!1)}function k(e){e.prop("disabled",!0);e.addClass("a-form-disabled");e.find("input").prop("disabled",!0)}function h(e){e.addClass("a-button-disabled");e.find("input").prop("disabled",!0)}var g=c.$;return{enableTextInput:l,enableButton:m,enableInput:function(e){0<e.closest(".a-button").length?m(e):(e.hasClass("a-input-text")||
e.hasClass("a-input-text-wrapper"))&&l(e)},disableTextInput:k,disableButton:h,disableInput:function(e){0<e.closest(".a-button").length?h(e):(e.hasClass("a-input-text")||e.hasClass("a-input-text-wrapper"))&&k(e)},inputsToJson:function(e){return e.map(function(){var d=g(this);if(d.is("input")){var b={};b[d.attr("name")]=d.val();return b}}).toArray().reduce(function(d,b){return g.extend(d,b)})}}});q.register("client-side-counters-util",function(){function c(c,m){var k=r.ue;k&&"function"===
typeof k.count&&(m||(m=(k.count(c)||0)+1),k.count(c,m))}return{incrementCounter:function(l){c(l)},insertCounter:c}});q.register("ap-form-validation-weblab",function(){return{shouldValidateForm:!0,shouldValidatePassword:!1,shouldValidateClaim:!1}});q.when("A","AuthToolkit","auth-pv-resend-utility","ready").register("auth-cnep-add-password",function(c,l,m){var k=c.$;if(!(1>k("#ap-cnep-add-password-resend-code-button").length)){l.countingDown("#ap-cnep-add-password-resend-code-button");
var h=c.state("auth-cnep-add-password-resend-state");if(h){var g=k("#auth-cnep-add-password-client-side-success-box"),e=k(".auth-pv-client-side-success-messages li"),d=k("#auth-cnep-add-password-client-side-error-box"),b=k(".auth-pv-client-side-error-messages li"),a=k(".auth-server-side-message-box"),f=k("#auth-resend-code-succeeded"),p=k("#auth-there-was-an-error-throttled"),t=k("#auth-there-was-an-error");h.sessionTimeoutUrl=h.cnepUrl;var v=function(){m.successHandler(f,g)},x=function(a){m.errorHandler(a,
h,p,t,d)};k("#ap-cnep-add-password-resend-code-button").click(function(){"#ap-cnep-add-password-resend-code-button".isDisabled||(m.hideMessageBox(g,e,d,b,a),c.ajax(h.resendPinCodeUrl,{method:"post",success:v,error:x}),"undefined"===typeof k("#ap-cnep-add-password-resend-code-button")||k("#ap-cnep-add-password-resend-code-button").hasClass("a-button-disabled")||(k("#ap-cnep-add-password-resend-code-button").addClass("a-button-disabled"),k("#ap-cnep-add-password-resend-code-button").find(".a-button-text").attr("disabled",
"disabled")),k("#ap-cnep-add-password-resend-code-button").find(".a-button-text").data("remaining",h.originalRemaining),l.countingDown("#ap-cnep-add-password-resend-code-button"))})}}});q.when("A","ready").register("counters-name",function(c){return{getCommonCounterNamePrefix:function(){var l="unknown",m=r.location.pathname.split("/");0<m.length&&(l=m[m.length-1]);var m="",k=c.state("auth-csm-page-state");k&&(m=k.assocHandle);return["AuthenticationPortal",l,m].join(":")}}});
q.when("A").register("page-util",function(c){function l(k){var h=c.$;k.jquery||h(k);return m(h("form").attr("name"))}function m(c){if(c)return c.replace(/(?:-| |\b)(\w)/g,function(h,g){return g.toUpperCase()})}return{getFormName:l,toCamelCase:m,determinePageType:function(){for(var c={SignIn:"SignInPage",Register:"RegistrationPage"},h=document.getElementsByTagName("form"),g=0;g<h.length;g++){var e=l(h[g]);if(e in c)return c[e]}}}})})})(function(){var q=window.AmazonUIPageJS||window.P,r=q._namespace||
q.attributeErrors;return r?r("AuthenticationPortalAssets"):q}(),window);